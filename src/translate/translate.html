<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/crypto-js/4.0.0/crypto-js.js"></script>
<script>
	let appKey = '7476cfed3071763c';
	let key = 'hQUJI5m5hf38mVwYW8Zw4hVycYavBqNX';//注意：暴露appSecret，有被盗用造成损失的风险
	let salt = (new Date).getTime();
	let curtime = Math.round(new Date().getTime()/1000);
	let query = 'hello';
	// 多个query可以用\n连接  如 query='apple\norange\nbanana\npear'
	let to = 'zh-CHS';
	let from = 'en';
	let str1 = appKey + truncate(query) + salt + curtime + key;
	let vocabId =  '您的用户词表ID';
	//console.log('---',str1);

	let sign = CryptoJS.SHA256(str1).toString(CryptoJS.enc.Hex);
	$.ajax({
		url: 'https://openapi.youdao.com/api',
		type: 'post',
		dataType: 'jsonp',
		data: {
			q: query,
			appKey: appKey,
			salt: salt,
			from: from,
			to: to,
			sign: sign,
			signType: "v3",
			curtime: curtime,
			vocabId: vocabId,
		},
		success: function (data) {
			console.log(data);
		}
	});

	function truncate(q){
		let len = q.length;
		if(len<=20) return q;
		return q.substring(0, 10) + len + q.substring(len-10, len);
	}

</script>
</body>
</html>
